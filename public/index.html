<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Global Baseball WAR Explorer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color-scheme: light dark;
        font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
          sans-serif;
        background-color: #0f172a;
        color: #f1f5f9;
      }

      body {
        margin: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        background: linear-gradient(160deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.9));
      }

      header {
        padding: 3rem 1rem 1rem;
        text-align: center;
      }

      h1 {
        margin: 0 auto 0.5rem;
        font-size: clamp(2rem, 5vw, 3rem);
        letter-spacing: 0.04em;
        text-transform: uppercase;
      }

      p.tagline {
        margin: 0 auto;
        max-width: 60ch;
        line-height: 1.6;
        color: #cbd5f5;
        font-size: 1rem;
      }

      main {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 1rem 3rem;
      }

      #map-container {
        width: min(1100px, 100%);
        aspect-ratio: 16 / 9;
        background: rgba(15, 23, 42, 0.85);
        border-radius: 16px;
        box-shadow: 0 20px 50px rgba(15, 23, 42, 0.5);
        padding: clamp(12px, 2vw, 24px);
      }

      svg {
        width: 100%;
        height: 100%;
      }

      .country {
        fill: #1d4ed8;
        stroke: #0f172a;
        stroke-width: 0.4px;
        fill-opacity: 0.7;
      }

      .state {
        fill: #facc15;
        fill-opacity: 0.45;
        stroke: #fbbf24;
        stroke-width: 0.3px;
      }

      footer {
        text-align: center;
        padding: 1.5rem;
        font-size: 0.85rem;
        color: #94a3b8;
      }

      a {
        color: inherit;
        font-weight: 600;
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }

      @media (max-width: 600px) {
        header {
          padding: 2rem 1rem 0.5rem;
        }
        footer {
          padding: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Global Baseball WAR Explorer</h1>
      <p class="tagline">
        A foundation for visualizing baseball Wins Above Replacement (WAR) by place of
        birth. The interactive map highlights every country across the globe and adds a
        detailed breakdown of United States statesâ€”ready for future player data layers.
      </p>
    </header>
    <main>
      <div id="map-container"></div>
    </main>
    <footer>
      Built with D3.js and TopoJSON. Baseball WAR comparisons coming soon.
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/topojson-client@3"></script>
    <script>
      const container = document.getElementById('map-container');
      const width = container.clientWidth;
      const height = container.clientHeight;

      const svg = d3
        .select('#map-container')
        .append('svg')
        .attr('viewBox', `0 0 ${width} ${height}`)
        .attr('role', 'img')
        .attr('aria-label', 'World map with highlighted countries and US states');

      const projection = d3
        .geoNaturalEarth1()
        .scale(width / 6.5)
        .translate([width / 2, height / 2]);

      const path = d3.geoPath(projection);

      const worldUrl = 'https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json';
      const usUrl = 'https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json';

      Promise.all([d3.json(worldUrl), d3.json(usUrl)])
        .then(([worldData, usData]) => {
          const countries = topojson.feature(worldData, worldData.objects.countries);
          const states = topojson.feature(usData, usData.objects.states);

          svg
            .append('g')
            .selectAll('path')
            .data(countries.features)
            .join('path')
            .attr('class', 'country')
            .attr('d', path);

          svg
            .append('g')
            .selectAll('path')
            .data(states.features)
            .join('path')
            .attr('class', 'state')
            .attr('d', path);
        })
        .catch((error) => {
          console.error('Failed to load map data', error);

          svg
            .append('text')
            .attr('x', width / 2)
            .attr('y', height / 2)
            .attr('text-anchor', 'middle')
            .attr('fill', '#f87171')
            .text('Failed to load map data. Please refresh the page.');
        });
    </script>
  </body>
</html>
